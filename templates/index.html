{% extends 'base.html' %}

{% block javascript %}
    <script>
        $("#trueForm").submit(function (event) {
            var answer = $('input[type=radio]:checked');
            var _answer = answer.val();
            var csrf = $("input[name='csrfmiddlewaretoken']").val();
            $.ajax({
                url: "{% url 'index' %}",
                type: "GET",
                headers:{
                    'X-CSRFToken': csrf
                },
                data: {
                    'answer': _answer
                },
                dataType: 'json',
                success: function (data) {
                        if (data['is_true']) {
                            answer.css("background-color", "green");
                        }
                        else {
                            $('#' + data['true_answer']).css("background-color", "green");
                            answer.css("background-color", "red");
                        }
                }
            });
            event.preventDefault();
        });
    </script>
{% endblock %}

{% block content %}
    <form action="{% url 'index' %}" method="post" id="trueForm">
        {% csrf_token %}
        <p>{{ question }}</p>
        <span>
      {% for ans in possible_answers %}
          <div id="{{ ans }}">
        <input type="radio" name="answer" value="{{ ans }}">
        <label>{{ ans }}</label>
          </div>
      {% endfor %}
            <div>
        <button type="submit">Submit</button>
    </div>
      </span>
    </form>
{% endblock %}